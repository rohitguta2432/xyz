angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",["$injector","$parse","$compile",function(a,e,t){return{restrict:"A",link:function(n,r,i,u){function l(e){return!!(e&&"invalid-message"in e.attributes)&&a.get(e.attributes["invalid-message"].value)}function o(a){for(var e=l(a),t=0;t<a.length;t++)t in a&&s(a[t],e)}function s(a,e){"validate-on"in a.attributes&&"blur"===a.attributes["validate-on"].value&&angular.element(a).on("blur",function(){c(a,e),b(a)});var t=n.$watch(function(){return a.value+a.required+q.submitted+f(a)+d(q[a.name])+m(q[a.name])},function(){q.submitted?(c(a,e),b(a)):"validate-on"in a.attributes&&"dirty"===a.attributes["validate-on"].value?(c(a,e),b(a)):q[a.name]&&q[a.name].$pristine&&(c(a,e),b(a))});V.push(t)}function d(a){if(a&&"$dirty"in a)return a.$dirty}function m(a){if(a&&"$valid"in a)return a.$valid}function f(a){if("validator"in a.attributes){var e=n.$eval(a.attributes.validator.value);return q[a.name].$setValidity("angularValidator",e),e}}function c(a,e){var t=function(){return"<i class='fa fa-times'></i> Required"},n=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in q){var r=q[a.name],i=v(a);i&&i.remove(),"angular-validator-quiet"in p.attributes||"angular-validator-quiet"in a.attributes||(r.$dirty||q.submitted)&&(r.$error.required?"required-message"in a.attributes?angular.element(a).after(g(a.attributes["required-message"].value)):angular.element(a).after(g(t)):r.$valid||("invalid-message"in a.attributes?angular.element(a).after(g(a.attributes["invalid-message"].value)):e?angular.element(a).after(g(e.message(r,a))):angular.element(a).after(g(n))))}}function g(a){return"<label class='control-label has-error validationMessage'>"+n.$eval(a)+"</label>"}function v(a){for(var e=angular.element(a).parent().children(),t=0;t<e.length;t++)if(angular.element(e[t]).hasClass("validationMessage"))return angular.element(e[t]);return!1}function b(a){if(a.name in q){var e=q[a.name];angular.element(a).removeClass("has-error"),angular.element(a.parentNode).removeClass("has-error"),(e.$dirty||q.submitted)&&e.$invalid&&(angular.element(a.parentNode).addClass("has-error"),angular.element(a).addClass("has-error"))}}var y=function(){return Math.floor(1e5*Math.random())},h=!1;if(angular.forEach(r.find("input,select,textarea"),function(a){(a=$(a)).attr("name")||(a.attr("name",y()),console.log("WARNING! AngularValidator -> One of your form elements(<input>, <textarea>, <select>) is missing a name. We got your back and added a name, but if you want a pretty one you should add it yourself."),h=!0)}),i.name||(r.attr("name","TGAV_FORM_"+y()),console.log("WARNING! AngularValidator -> Your form element(<form>) is missing a name. We got your back and added a name, but if you want a pretty one you should add it yourself."),h=!0),h)t(r)(n);else{var p=angular.element(r)[0],V=[],q=e(i.name)(n);q.submitted=!1,n.$watch(function(){return Object.keys(q).length},function(){angular.forEach(V,function(a){a()}),o(p)}),r.on("submit",function(a){a.preventDefault(),n.$apply(function(){q.submitted=!0}),q.$valid?n.$apply(function(){n.$eval(i.angularValidatorSubmit)}):jQuery("form").find(".ng-invalid:first").focus()}),q.reset=function(){angular.forEach(p,function(a){a.name&&q[a.name]&&(q[a.name].$setViewValue(""),q[a.name].$render())}),q.submitted=!1,q.$setPristine()},o(p)}}}}]);
